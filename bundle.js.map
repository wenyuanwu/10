{"version":3,"sources":["webpack:///webpack/bootstrap 892ff42d172a0aa5a8fe","webpack:///./js/game.js","webpack:///./js/10.js","webpack:///./js/game_view.js","webpack:///./js/grid.js","webpack:///./js/tile.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7Da;AACA;;;AAGb;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iCAAiC;AACtD,IAAI;AACJ;AACA;AACA;AACA;;AAEA,EAAE,M;AACF;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,c;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,4C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,K;AACA;AACA;AACA;AACA;AACA,I;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;ACnHA;AAAA;AACiB;AACJ;;AAEb;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;;;ACjBY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;AAEA;AACA;AACA;AACA,EAAE;AACF,E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAoB,oBAAoB;AACxC;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA,mB;AACA,G;AACA;AACA,G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA,6C;AACA;AACA;AACA;AACA;AACA,sE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AC9Ea;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,eAAe;AAC9B;AACA,eAAe,cAAc;AAC7B;AACA,I;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA,EAAE;AACF;AACA;;AAEA;AACA,0C;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kC;AACA;;AAEA;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B;AACA,cAAc,cAAc;AAC5B;AACA,wEAAyB,0BAA0B;AACnD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA,cAAc,cAAc;AAC5B,cAAc,cAAc;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;;;;;;;;ACzFA;AACA;AACA;AACA;AACA,C","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 892ff42d172a0aa5a8fe","import {Grid} from './grid';\nimport {Tile} from './tile';\n\n\nexport const Game = function(size){\n\tthis.size = size;\n\tthis.grid = new Grid(size);\n\tthis.insertTile();\n};\n\nGame.prototype.playMove = function(pos){\n\t// console.log(\"grid-before-function\", this.grid.rows);\n\tconst shareBorderBlocks = this.shareBorderBlocks(this.grid.rows, pos);\n\tconst that = this;\n\t// console.log(shareBorderBlocks,\"shareBorderBlocks\");\n\tif(shareBorderBlocks.length > 1){\n\t\tshareBorderBlocks.forEach(\n\t\t\tfunction(block_pos){\n\t\t\t\tthat.removeTile({x: block_pos[0], y: block_pos[1]});\n\t\t\t});\n\t\t// console.log(this.grid.rows, \"arrange-before\");\n\t\tthis.reArrange();\n\t\t// console.log(this.grid.rows, \"arrange-after\");\n\t\tthis.insertTile();\n\n\t} else{\t\n\t\tthrow new Error('error');\n\t}\n};\n\nGame.prototype.insertTile = function(){\n\n\tconst that = this;\n\n\tif(this.grid.blocksAvailable()){\n\n\t\tconst emptyBlocks = this.grid.emptyBlocks();\n\n\t\temptyBlocks.forEach(function(block){\n\t\t\t// assign randomNumber\n\t\t\tconst randomNumber = Math.random();\n\t\t\tlet value;\n\t\t\tif(randomNumber < 0.5){\n\t\t\t\tvalue = 1; \n\t\t\t} else if (randomNumber < 0.8){\n\t\t\t\tvalue = 2;\n\t\t\t} else if (randomNumber < 0.95){\n\t\t\t\tvalue = 3;\n\t\t\t} else{\n\t\t\t\tvalue = 4;\n\t\t\t}\n\t\t\tconst tile = new Tile(block, value);\n\t\t\tthat.grid.insertTile(tile);\n\t\t});\n\t}\n};\n\nGame.prototype.shareBorderBlocks = function(arr, pos){\n\n// set up the tracking array\n\tconst dim = 5;\n\tlet taken = new Array(dim);\n\tlet row = new Array(dim);\n\tfor (let i = 0; i < dim; i++) {\n\t\trow[i] = false;\n\t}\n\tfor (let i = 0; i < dim; i++) {\n\t\ttaken[i] = row.slice(0);\n\t}\n\n\tlet shareBorderBlocks = [];\n\tlet tempQue = [];\n\n//helper method \n\tlet addBlock = function(position){\n\t\tlet x = position[0];\n\t\tlet y = position[1];\n\t\tlet dirs = [[1,0], [0,1], [-1,0], [0,-1]]; \n\t\tdirs.forEach( \n\t\t\tfunction(dir){\n\t\t\t\tlet newPos = [x + dir[0], y+ dir[1]];\n\t\t\t\tif(newPos[0]> 4 || newPos[1] > 4 ||\n\t\t\t\t\tnewPos[0] < 0 || newPos[1] < 0 ||\n\t\t\t\t\ttaken[newPos[0]][newPos[1]]) {\n\t\t\t\t\treturn;\n\t\t\t\t} \n\t\t\t\tif (arr[newPos[0]][newPos[1]].value === arr[x][y].value){\n\t\t\t\t\ttempQue.push(newPos);\n\t\t\t\t\ttaken[newPos[0]][newPos[1]] = true;\n\t\t\t\t}\n\t\t\t} \n\t\t);\n\t};\n\n\ttempQue.push(pos);\n\ttaken[pos[0]][pos[1]] = true;\n\twhile(tempQue.length > 0){\n\t\tlet posInQue = tempQue.shift();\n\t\tshareBorderBlocks.push(posInQue);\n\t\taddBlock(posInQue);\n\t}\n\treturn shareBorderBlocks;\n};\n\n\nGame.prototype.reArrange = function(){\n\treturn this.grid.reArrange();\n};\n\nGame.prototype.isOver = function(){\n\treturn this.grid.isOver();\n};\n\nGame.prototype.removeTile = function(tile){\n\treturn this.grid.removeTile(tile);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/game.js\n// module id = 0\n// module chunks = 0","// Wait till the browser is ready to render the game\nimport {GameView} from './game_view';\nimport {Game} from './game';\n\ndocument.addEventListener (\"DOMContentLoaded\", function(){\n\n\t// if(window.innerHeight < window.innerWidth){\n\t// \tGame.X = window.innerHeight * 0.8;\n\t// \tGame.Y = window.innerHeight * 0.8;\n\t// } else{\n\t// \tGame.X = window.innerWidth * 0.8 ;\n\t// \tGame.Y = window.innerWidth * 0.8;\n\t// }\n\n\tconst rootElement = $('.root');\n\tconst game = new Game(5);\n\tnew GameView(game, rootElement, 5);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/10.js\n// module id = 1\n// module chunks = 0","import {Game} from './game';\n\nexport const GameView = function(game, $el, size){\n\tthis.game = game;\n\tthis.$el = $el;\n\tthis.size = size;\n\tthis.setupBoard();\n\tthis.updateTile(this.game.grid);\n\tthis.bindEvent();\n};\n\nGameView.prototype.bindEvent = function(){\n\n\tthis.$el.on(\"click\", \"li\", (event => {\n\t\tconst $block = $(event.currentTarget);\n\t\tthis.makeMove($block);\n\t}));\n};\t\n\nGameView.prototype.makeMove = function($block){\n\n\tconst pos = $block.data(\"pos\");\n\t// console.log(this.game.grid.rows, \"grid!!\");\n\ttry {\n\t\tthis.game.playMove(pos);\n\t\tthis.updateTile(this.game.grid);\n\t} catch(e){\n\t\talert(\"Invalid move! Try again\");\n\t\treturn;\n\t}\n\n\tif(this.game.isOver()){\n\t\tthis.$el.off(\"click\");\n\t\tthis.$el.addClass(\"game-over\");\n\t}\n};\n\nGameView.prototype.setupBoard = function(){\n\n\tfor(let rowIdx = 0; rowIdx < this.size; rowIdx ++){\n\t\tconst $ul = $(\"<ul>\");\n\t\t$ul.addClass(\"group\");\n\t\tfor(let colIdx = 0; colIdx < this.size; colIdx ++){\n\t\t\tvar li = document.createElement(\"li\");\n\t\t\tli.setAttribute(\"class\",rowIdx + \"-\" + colIdx);\n\t\t\tlet $li = $(li);\n\t\t\t$li.data(\"pos\", [rowIdx, colIdx]);\n\t\t\t$ul.append($li);\t\n\t\t}\t\n\t\tthis.$el.append($ul);\n\t\t}\t\n};\n\nGameView.prototype.updateTile = function(grid){\n\tconst that = this;\n    // console.log(\"row-view\", grid.rows);\n\tgrid.rows.forEach(function (row) {\n      row.forEach(function (block) {\n        if (block) {\n          that.addTile(block);\n        }\n      });\n    });\n};\n\nGameView.prototype.addTile = function(block){\t\n\tvar inner = document.createElement(\"div\");\n\tinner.textContent = block.value;\n\tvar className = \"tile \" + \"tile-position-\"+ block.x + \"-\" + block.y + \" value-\" + block.value;\n\tthis.applyClass(inner,className);\n\tvar li = document.getElementsByClassName(block.x + \"-\" + block.y)[0];\t\n\tli.setAttribute(\"id\", block.value);\n\t$(li).empty();\n\t$(li).wrapInner(inner);\n};\n\nGameView.prototype.applyClass = function(element, className){\n\telement.setAttribute(\"class\", className);\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/game_view.js\n// module id = 2\n// module chunks = 0","import {Tile} from './tile';\n\nexport function Grid (size){\n\tthis.size = size;\n\tthis.rows = [];\n\tthis.setup();\n}\n\nGrid.prototype.setup = function(){\n  for(let i =0; i < this.size; i++) {\n  \t  \tthis.rows[i] = [];\n  \tfor(let j=0; j< this.size; j++){\n  \t\tthis.rows[i].push(null);\n  \t} \n  }\n};\n\nGrid.prototype.isOver = function(){\n\tthis.eachBlock(function(x,y,tile){\n\t\tif(tile && tile.value === 10){\n\t\t\treturn true;\n\t\t}\n\t});\n\n\treturn false;\n};\n\n// check blocks need to be filled\n\nGrid.prototype.emptyBlocks = function(){\n\tvar blocks = [];\n\tthis.eachBlock(function(x,y,tile){\n\t\tif(!tile){\n\t\t\tblocks.push({x: x, y: y});\n\t\t}\n\t});\n\treturn blocks;\n};\n\nGrid.prototype.blocksAvailable = function(){\n\treturn (this.emptyBlocks().length !== 0); \n};\n\nGrid.prototype.insertTile = function(tile){\n\tthis.rows[tile.x][tile.y] = tile;\n};\n\nGrid.prototype.removeTile = function(tile){\n\tthis.rows[tile.x][tile.y] = null;\t\n};\n\nGrid.prototype.reArrange = function(){\n\t// add logic of the removed tile!\n\n\tlet newArr=[];\n\tfor(let x=0; x < this.size; x++){\n\t\tnewArr[x] = [];\n\t\tfor(let y=0; y< this.size; y++){\n\t\t\tif(this.rows[x][y]){\n\t\t\t\tlet tile = new Tile({x: x, y: newArr[x].length}, this.rows[x][y].value);\n\t\t\t\tnewArr[x].push(tile);\n\t\t\t}\n\t\t}\n\n\t\twhile(newArr[x].length !== 5){\n\t\t\tnewArr[x].push(null);\n\t\t}\n\n\t}\n\n\tthis.rows = newArr;\n};\n\n\n// helper method\n\nGrid.prototype.eachBlock = function(callback){\n\tfor (let x=0; x< this.size; x++){\n\t\tfor(let y=0; y< this.size; y++){\n\t\t\tcallback(x,y,this.rows[x][y]);\n\t\t}\n\t}\n};\n\nGrid.prototype.withinBounds = function (pos) {\n  return pos.x >= 0 && pos.x < this.size &&\n         pos.y >= 0 && pos.y < this.size;\n};\n\n\n// };\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/grid.js\n// module id = 3\n// module chunks = 0","\nexport function Tile (position, value){\n\tthis.x = position.x;\n\tthis.y = position.y;\n\tthis.value = value;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/tile.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}